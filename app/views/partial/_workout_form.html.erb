<h2 class="mt-3"><%= @exercise.name %></h2>

<nav class="navbar navbar-expand-sm my-3">
  <ul class="navbar-nav">
    <li class="nav-item"><%= link_to '一覧', workouts_path(exercise_id: @exercise.id), class: 'nav-link btn btn-default' %></li>
    <li class="nav-item"><%= link_to 'メニュー', menus_path, class: 'nav-link btn btn-default' %></li>
  </ul>
</nav>

<div class="form-content mt-3">
  <%= form_with model: workout, local: true do |f| %>
    <!-- errors -->
    <% if workout.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(workout.errors.count, '') %> 件のエラーがあります</h2>
        <ul>
          <% workout.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
    <!-- end_errors -->

    <div class="form-area">
      <div class="form-group">
        <%= f.label :created_at, 'トレーニング日' %><br>
        <%= f.datetime_select :created_at, {}, value: Time.now.strftime("%Y-%m-%d") %>
      </div>

      <table class="table table-hover">
        <thead>
          <tr>
            <th>set</th>
            <th>weight</th>
            <th>rep</th>
          </tr>
        </thead>

        <tbody>
          <%= f.fields_for :exercise_logs do |ef| %>
            <tr>
              <td><%= ef.index + 1  %></td>
                  <%= ef.hidden_field :set, value: ef.index + 1 %>
              <td><%= ef.number_field :weight, min: 0, max:500, step:0.1, class: 'py-2 m-2' %></td>
              <td><%= ef.number_field :rep, min: 0, max: 500, class: 'py-2 m-2' %></td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <div class="form-group">
        <%= f.label 'condition' %>
        <%= f.select :condition, Workout.conditions_i18n.invert, {}, class: 'form-control', id: 'workout_condition' %>
      </div><!-- /.form-group -->

      <div class="form-group">
        <%= f.label :memo %>
        <%= f.text_area :memo, class: 'form-control', id: 'workout_memo' %>
      </div><!-- /.form-group -->

      <div class="form-group">
        <%= f.hidden_field :exercise_id, value: @exercise.id %>
        <%= f.submit class: 'btn btn-primary' %>
      </div><!-- /.form-group -->
    </div><!-- /.form-area -->
  <% end %>
</div>
